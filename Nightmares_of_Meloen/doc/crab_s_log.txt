(09:21:02 PM) FAAB: Crab_: yesterday, you said you saw a way for my custom AI to be selected by default in the AI drop down list box
(09:24:03 PM) Crab_: FAAB: see src/multiplayer_connect.cpp lines 172  and 174
(09:24:30 PM) Crab_: it determines the default ai config for a given side, and then the init_ai_algorithm_combo sets the selected item in that dropdown box.
(09:25:44 PM) Crab_: so, when you add things from era to ai configuration, you should pass in an additional parameter naming the default ai for the era.
(09:25:56 PM) Crab_: then, you will be able to add a method to ai configuration to get that 'default' name
(09:26:31 PM) Crab_: which will return era-specified default, if it is set (or standard default rca ai otherwise)
(09:38:59 PM) Johannes13 [~Johannes@unaffiliated/johannes13] entered the room.
(09:39:43 PM) FAAB: Crab_: it is not like a method that works already, right ? I need to patch the C++ code.
(09:40:31 PM) Crab_: yes, you have to patch the C++ code
(09:40:36 PM) Crab_: a small patch it is.
(09:40:51 PM) FAAB: ok, now I understand
(09:41:15 PM) FAAB: would that work to get the AI to use when we droid a side too ?
(09:41:57 PM) Crab_: maybe.
(09:42:36 PM) Crab_: at least 'it can be easily coded that way'
(09:42:59 PM) FAAB: ok, I will work on that while you are getting a sun tan under the finnish sky ;)
(09:43:30 PM) Crab_: I think that it might work out of the box, just fix the first part and check
(09:44:11 PM) FAAB: I will, thanks for the help
(09:45:02 PM) Crab_: ah no, it won't work that way.
(09:45:22 PM) Crab_: you need to fix multiplayer_connect.cpp somewhere around line 666
(09:45:42 PM) Crab_: and around line 659
(09:46:17 PM) Crab_: as you see, the actual 'algorithm that is selected' is used (via  ai::configuration::get_ai_config_for(ai_algorithm_); ) only for computer players
(09:48:07 PM) Crab_: but you need to make sure that you don't interfere with the scenario config.
(09:48:54 PM) Crab_: so, you will not be able to change the ai of 'sides which don't allow players' that way, and it's by design.
(09:49:12 PM) FAAB: I see
(09:49:36 PM) FAAB: I will make the first step first
(09:49:45 PM) Crab_: but that approach will work for droiding human sides :)
(09:49:59 PM) Crab_: since they are with allow_player_=true
(09:55:51 PM) ***FAAB is saving the log to use it after having read the code carefully

droiding-a-side case:
---------------------
On game startup:
play_controller::init calls:
gamestate_.build_team calls:
(gamestatus.cpp) team_builder::build_team calls:
(gamestatus.cpp) team_builder::new_team calls:
team::team calls:
team::team_info::team_info calls:
ai::manager::add_ai_for_side_from_config calls:
	ai::configuration::parse_side_config
		(only uses ai::configuration::default_config_)
	ai::manager::get_or_create_ai_stack_for_side
		(CREATE)

On each turn (suddenly relevant after an menu_event::do_droid has been called):
playsingle_controller::play_scenario calls:
playsingle_controller::play_turn calls:
playmp_controller::play_side calls:
playsingle_controller::play_ai_turn calls:
ai::manager::play_turn calls:
ai::manager::get_active_ai_for_side calls:
ai::manager::get_active_ai_holder_for_side calls:
	ai::manager::get_or_create_ai_stack_for_side
		(GET)

-> the ai stack is always created at the begining of the game using ai::configuration::default_config_

setting-ai-at-creation case:
----------------------------
(multiplayer_connect.cpp) connect::connect calls:
(multiplayer_connect.cpp) connect::lists_init calls:
	ai::configuration::add_era_ai_from_config
	ai::configuration::get_available_ais
	connect::side::side calls:
		ai::configuration::get_default_ai_algorithm
		connect::side::init_ai_algorithm_combo
